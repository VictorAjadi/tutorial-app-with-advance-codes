import{g as C,r as p,z as D,a as U,j as e,_ as c,B as F,D as _}from"./index-u5watr16.js";import{P as S}from"./ProgressBar-CNHIutLk.js";function P(){const{course:i}=C(),[f,y]=p.useState(0),[h,g]=p.useState("idle"),b=D(),x=U(n=>n.tutorialData),[t,j]=p.useState({title:"",description:"",category:"",thumbnailUrl:"",skill_level:"",type:"",currency:"",amount:""}),s=async n=>{const{name:d,value:a,type:u,files:l}=n.target,m=["image/jpeg","image/png","image/webp"];if(u==="file"){if(l[0]){const r=l[0];if(m.includes(r.type)){const v=new FileReader;v.onprogress=o=>{if(o.lengthComputable){const w=Math.round(o.loaded/o.total*100);y(w)}},v.readAsDataURL(r),j(o=>({...o,[d]:r}))}else c.error("Invalid image format. Please upload a valid image file.")}}else j(r=>({...r,[d]:a}))};async function N(n){n.preventDefault();const d=n.target.id,a=new FormData;a.append("category",t.category),a.append("description",t.description),a.append("type",t.type),a.append("title",t.title),a.append("amount",t.amount),a.append("currency",t.currency),a.append("skill_level",t.skill_level),a.append("thumbnailUrl",t.thumbnailUrl),g("submitting");const u=c.loading("Updating..."),l=await F(d,a);if(c.remove(u),g("idle"),l.status==="success"&&l.message){const m={state:!x.state,tutorials:x.tutorials};return b(_(m)),c.success(l.message)}else return c.error(l.message)}return e.jsxs("form",{id:i._id,onSubmit:N,children:[e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"row g-3 mt-4",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"title",className:"fw-medium fs-5 text-secondary form-label",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title||i.title,onChange:s,className:"form-control py-2",placeholder:"Title"})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"description",className:"fw-medium fs-5 text-secondary form-label",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description||i.description,onChange:s,className:"form-control py-2",placeholder:"Description"})]}),e.jsxs("div",{className:"row g-2 justify-content-between align-items-center",children:[e.jsxs("select",{name:"category",className:"col-3 rounded-3 form-select",ariaLabel:"Default select example",id:"category",value:t.category||i.category,onChange:s,children:[e.jsx("option",{value:"",disabled:!0,className:"bg-secondary text-light",children:"Category"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"development",children:"Development"}),e.jsx("option",{value:"finance",children:"Finance"}),e.jsx("option",{value:"engineering",children:"Engineering"}),e.jsx("option",{value:"health_fitness",children:"Health & Fitness"}),e.jsx("option",{value:"lifestyle",children:"Lifestyle"}),e.jsx("option",{value:"art_design",children:"Art & Design"}),e.jsx("option",{value:"data_science",children:"Data Science"})]}),e.jsxs("select",{name:"skill_level",className:"col-3 rounded-3 form-select",ariaLabel:"Default select example",id:"skill_level",value:t.skill_level||i.skill_level,onChange:s,children:[e.jsx("option",{value:"",disabled:!0,className:"bg-secondary text-light",children:"skill level"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"high",children:"High"})]}),e.jsxs("select",{name:"type",className:"p-2 w-100 rounded-3",id:"type",value:t.type,onChange:s,children:[e.jsx("option",{value:"",disabled:!0,className:"bg-secondary text-light",children:"Course Type"}),e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"paid",children:"Paid"})]}),t.type==="paid"?e.jsxs("div",{className:"w-100 row g-3",children:[e.jsx("br",{}),e.jsxs("select",{name:"currency",className:"p-2 w-100 rounded-3",id:"currency",value:t.currency,onChange:s,children:[e.jsx("option",{value:"",disabled:!0,className:"bg-secondary text-light",children:"Currency"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]}),e.jsx("input",{type:"number",value:t.amount,onChange:s,name:"amount",className:"w-100 p-2 rounded-3",placeholder:"amount"})]}):e.jsx(e.Fragment,{})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"thumbnailUrl",className:"fw-medium fs-5 text-secondary form-label",children:"Course Thumnail Image"}),e.jsx("input",{type:"file",id:"thumbnailUrl",name:"thumbnailUrl",className:"form-control py-2",accept:"image/*",placeholder:"Course Thumnail Image",onChange:s})]}),e.jsx(S,{progress:f})]})}),e.jsx("button",{type:"submit",disabled:h==="submitting",className:`${h==="submitting"?"bg-secondary":"box-shadow"} w-100 d-flex justify-content-center align-items-center fw-medium rounded-pill p-2 fs-5`,children:"Upload"})]})}export{P as default};
