import{r as d,q as u,f as b,j as e,I as N,b as v,L as y,_ as s,e as _,t as z,v as I,m as S,w as P,x as k,y as C}from"./index-C4rIzEKt.js";function E(){const[m,n]=d.useState("idle"),[x,f]=d.useState(u);d.useEffect(()=>{(async()=>{try{const a=await(await fetch("/flash-messages")).json();a.error_msg&&s.error(a.error_msg);const t=await _(u);f(t)}catch(i){console.error("Error fetching data:",i),s.error("Failed to fetch flash messages")}})()},[]);const p=b(),[r,w]=d.useState({name:"",email:"",password:"",confirm_password:""}),[l,c]=d.useState({name:null,email:null,password:null,confirm_password:null});function g(o){const{name:i,value:a}=o.target;[i]=="email"?c(t=>({...t,email:z(a)})):[i]=="password"?c(t=>({...t,password:I(a)})):[i]=="confirm_password"?c(t=>({...t,confirm_password:S(r.password,a)})):c(t=>({...t,name:P(a)})),w(t=>({...t,[i]:a}))}async function h(o){if(o.preventDefault(),!r.name)return s.error("Please enter the name field.");if(!r.email)return s.error("Please enter the email address field.");if(!r.password)return s.error("Please enter the password field.");if(!r.confirm_password)return s.error("Please enter the confirm password field.");n("submitting");const i=s.loading("Processing new user..."),a=await k(r);if(a.status==="success"&&a.message)localStorage.setItem("isLoggedIn","true"),n("idle"),s.remove(i),s.success(a.message),p("/");else return n("idle"),s.remove(i),s.error(a.message)}async function j(o){if(o.preventDefault(),!r.name)return s.error("Please enter the name field.");if(!r.email)return s.error("Please enter the email address field.");if(!r.password)return s.error("Please enter the password field.");if(!r.confirm_password)return s.error("Please enter the confirm password field.");n("submitting");const i=s.loading("Creating new instructor..."),a=await C(r);if(a.status==="success"&&a.message)localStorage.setItem("isLoggedIn","true"),n("idle"),s.remove(i),s.success(a.message),p("/settings");else return n("idle"),s.remove(i),s.error(a.message)}return e.jsxs("div",{style:{width:"100%",height:"100%"},className:"bg-lightGray py-5 px-5",children:[e.jsx(N,{position:"top-center",reverseOrder:!1}),e.jsx("section",{className:"signup",children:e.jsx("div",{className:"container login",children:e.jsxs("div",{className:"signup-content",children:[e.jsxs("div",{className:"signup-form",children:[e.jsx("h2",{className:"form-title fw-bold display-5",children:"Sign up"}),e.jsxs("form",{onSubmit:h,className:"register-form",id:"register-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:e.jsx("i",{style:{marginTop:"12px",marginRight:"20px"},className:"zmdi zmdi-account login-label material-icons-name"})}),e.jsx("input",{type:"text",name:"name",id:"name",className:"px-4",value:r.name,placeholder:"Your fullname",onChange:g})]}),l.name&&e.jsx("p",{className:`${l.name.status==="error"?"text-danger":"text-success"} fw-bold`,children:l.name.message}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:e.jsx("i",{style:{marginTop:"12px",marginRight:"20px"},className:"zmdi zmdi-email login-label"})}),e.jsx("input",{type:"email",name:"email",id:"email",className:"px-4",value:r.email,placeholder:"Your Email",onChange:g})]}),l.email&&e.jsx("p",{className:`${l.email.status==="error"?"text-danger":"text-success"} fw-bold`,children:l.email.message}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"pass",children:e.jsx("i",{style:{marginTop:"12px",marginRight:"20px"},className:"zmdi zmdi-lock login-label"})}),e.jsx("input",{type:"password",name:"password",id:"pass",className:"px-4",value:r.password,placeholder:"Password",onChange:g})]}),l.password&&e.jsx("p",{className:`${l.password.status==="error"?"text-danger":"text-success"} fw-bold`,children:l.password.message}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"re_pass",children:e.jsx("i",{style:{marginTop:"12px",marginRight:"20px"},className:"zmdi zmdi-lock-outline login-label"})}),e.jsx("input",{type:"password",name:"confirm_password",id:"re_pass",className:"px-4",value:r.confirm_password,placeholder:"Repeat your password",onChange:g})]}),l.confirm_password&&e.jsx("p",{className:`${l.confirm_password.status==="error"?"text-danger":"text-success"} fw-bold`,children:l.confirm_password.message}),e.jsxs("div",{className:"d-flex flex-column flex-lg-row flex-xl-row gap-3",children:[e.jsx("button",{onClick:h,type:"button",disabled:m==="submitting",className:`text-light rounded-1 p-3 border border-0 ${m==="submitting"?"bg-secondary":"bg-primary"}`,children:"Register User"}),e.jsx("button",{onClick:j,type:"button",disabled:m==="submitting",className:`text-light rounded-1 p-3 border border-0 ${m==="submitting"?"bg-secondary":"bg-primary"}`,children:"Register Instructor"})]})]}),e.jsxs("div",{className:"social-login",children:[e.jsx("span",{className:"social-label",children:"Or sign up as student with"}),e.jsxs("ul",{className:"socials",children:[e.jsx("li",{children:e.jsx("a",{href:"/auth/facebook",children:e.jsx("i",{className:"display-flex-center zmdi zmdi-facebook"})})}),e.jsx("li",{children:e.jsx("a",{href:"/auth/twitter",children:e.jsx("i",{className:"display-flex-center zmdi zmdi-twitter"})})}),e.jsx("li",{children:e.jsx("a",{href:"/auth/google",children:e.jsx("i",{className:"display-flex-center zmdi zmdi-google"})})})]})]})]}),e.jsxs("div",{className:"signup-image",children:[e.jsx("figure",{className:"d-none d-md-block d-lg-block d-xl-block d-xxl-block",children:e.jsx(v.LazyLoadImage,{src:u,placeholderSrc:async()=>await x,effect:"blur"})}),e.jsx(y,{to:"/login",className:"signup-image-link",children:"I am already member"})]})]})})})]})}export{E as default};
