import{f as L,r as g,g as F,j as e,b as S,p as w,e as I,_ as i,h as D,i as E,k as M}from"./index-u5watr16.js";/* empty css                    */import{b as A}from"./background-LL2Y2h6f.js";import{P as N}from"./ProgressBar-CNHIutLk.js";function B(){const u=L(),[x,b]=g.useState("idle"),[c,h]=g.useState({cover:0,profile:0}),{user:l}=F(),[a,f]=g.useState({profile_image:"",cover_image:"",name:l.name||"",email:l.email||"",address:l.addryess||"",mobile_number:l.mobile_number||"",website:l.website||"",github:l.github||"",twitter:l.twitter||"",facebook:l.facebook||"",skills:l.skills.join(",").toString()||"",profession:l.profession||"",paypal_id:l.paypal_id||"",paymentProvider:l.paymentProvider||""});async function t(o){const{name:s,value:r,type:n,files:y}=o.target,P=["image/jpeg","image/png","image/webp"];if(n==="file"){if(y[0]){const d=y[0];if(P.includes(d.type)){const j=new FileReader;j.onprogress=m=>{if(m.lengthComputable){const v=Math.round(m.loaded/m.total*100);s==="profile_image"?h(p=>({...p,profile:v})):s==="cover_image"&&h(p=>({...p,cover:v}))}},j.readAsDataURL(d),f(m=>({...m,[s]:d}))}else{i.error("Invalid image format. Please upload a valid image file.");return}}}else f(d=>({...d,[s]:r}))}async function C(o){o.preventDefault(),b("submitting");const s=new FormData;s.append("name",a.name),s.append("email",a.email),s.append("mobile_number",a.mobile_number),s.append("cover_image",a.cover_image),s.append("profile_image",a.profile_image),s.append("address",a.address),s.append("website",a.website),s.append("github",a.github),s.append("twitter",a.twitter),s.append("facebook",a.facebook),s.append("skills",a.skills),s.append("profession",a.profession),s.append("paypal_id",a.paypal_id),s.append("paymentProvider",a.paymentProvider);const r=i.loading("Update details..."),n=await D(s);return b("idle"),i.remove(r),n.status==="success"&&n.message?i.success(n.message):i.error(n.message)}async function _(o){o.preventDefault();const s=i.loading("Deactivating account..."),r=await E();return i.remove(s),r.status==="success"&&r.message?(i.success(r.message),localStorage.removeItem("isLoggedIn"),u("/")):(localStorage.setItem("isLoggedIn",!1),i.error(r.message))}async function k(o){o.preventDefault();const s=i.loading("Deleting account..."),r=await M();return i.remove(s),r.status==="success"&&r.message?(localStorage.removeItem("isLoggedIn"),i.success(r.message),u("/login")):i.error(r.message)}return e.jsxs("div",{children:[e.jsxs("form",{method:"PATCH",onSubmit:C,encType:"multipart/form-data",children:[e.jsxs("div",{id:"main",style:{background:`${`url("${l.cover_image||A}")`}`},className:"p-5 rounded-3 d-flex flex-column flex-md-row flex-lg-row flex-xl-row flex-xxl-row justify-content-between align-items-start align-items-md-end align-items-lg-end align-items-xl-end align-items-xxl-end gap-2 gap-md-3 gap-lg-3 gap-xl-3 gap-xxl-3 flex-row",children:[e.jsx("div",{className:"d-flex flex-row flex-nowrap mb-3 justify-content-between align-items-center gap-2 rounded-3",children:e.jsxs("div",{className:" bg-transparent border border-0 position-relative",children:[e.jsx(S.LazyLoadImage,{className:"rounded-circle border-5 border border-white",width:"140px",height:"140px",alt:"profile img",src:l.profile_image||w,placeholderSrc:async()=>await I(l.profile_image||w),effect:"blur"}),e.jsxs("button",{type:"button",style:{transform:"translate(-55px,-15px)"},className:"position-absolute top-50 mt-5 start-100 badge border border-light rounded-circle bg-white p-2",children:[e.jsx("label",{htmlFor:"profile_image",children:e.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",e.jsx("title",{children:"Edit Profile Image"})," ",e.jsxs("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[" ",e.jsxs("g",{id:"icon",fill:"#ffc107",transform:"translate(42.666667, 64.000000)",children:[" ",e.jsx("path",{d:"M277.333333,1.42108547e-14 C277.333333,1.42108547e-14 277.681778,0.557511111 278.378667,1.67253333 L278.698667,2.18453333 C279.438222,3.36782222 280.478222,5.03182222 281.818667,7.17653333 L282.458667,8.20053333 C283.891556,10.4931556 285.624889,13.2664889 287.658667,16.5205333 L288.618667,18.0565333 C290.744889,21.4584889 293.171556,25.3411556 295.898667,29.7045333 L297.178667,31.7525333 C299.998222,36.2638222 303.118222,41.2558222 306.538667,46.7285333 L308.138667,49.2885333 C311.003462,53.8722052 314.068069,58.775577 317.332489,63.9986486 L426.666667,64 L426.666667,362.666667 L7.10542736e-15,362.666667 L7.10542736e-15,64 L109.333,64 L149.333333,1.42108547e-14 L277.333333,1.42108547e-14 L277.333333,1.42108547e-14 Z M213.333333,85.3333333 C148.531923,85.3333333 96,137.865256 96,202.666667 C96,267.468077 148.531923,320 213.333333,320 C278.134744,320 330.666667,267.468077 330.666667,202.666667 C330.666667,137.865256 278.134744,85.3333333 213.333333,85.3333333 Z M213.333333,128 C254.570595,128 288,161.429405 288,202.666667 C288,243.903928 254.570595,277.333333 213.333333,277.333333 C172.096072,277.333333 138.666667,243.903928 138.666667,202.666667 C138.666667,161.429405 172.096072,128 213.333333,128 Z M384,106.666667 C372.217925,106.666667 362.666667,116.217925 362.666667,128 C362.666667,139.782075 372.217925,149.333333 384,149.333333 C395.782075,149.333333 405.333333,139.782075 405.333333,128 C405.333333,116.217925 395.782075,106.666667 384,106.666667 Z",id:"Combined-Shape",children:" "})," "]})," "]})," "]})]})}),e.jsx("input",{onChange:t,className:"d-none",type:"file",name:"profile_image",accept:"image/*",id:"profile_image"})]})]})}),e.jsxs("div",{className:"text-nowrap  flex-fill mb-md-5 mb-sm-1 pb-md-5 mb-lg-5 mb-xl-5 mb-xxl-5 text-white-50 text-gradient",children:[e.jsx("h4",{className:"d-none d-lg-block d-xl-block d-xxl-block ",children:"Looking Forward To Build A New Skill"}),e.jsx("h3",{className:"fw-bold text-capitalize",children:l.name})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"text-nowrap box-shadow rounded-pill py-3 px-4 fw-medium",children:[e.jsx("label",{htmlFor:"cover_image",children:"Edit Cover Image"}),e.jsx("input",{onChange:t,className:"d-none",type:"file",name:"cover_image",accept:"image/*",id:"cover_image"})]})})]}),e.jsxs("div",{className:"row g-3 mt-4",children:[e.jsxs("div",{className:"col-12",children:[c.profile>0&&e.jsx(N,{progress:c.profile}),c.cover>0&&e.jsx(N,{progress:c.cover})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"name",className:"fw-medium text-secondary form-label",children:"Full Name"}),e.jsx("input",{value:a.name,onChange:t,type:"text",id:"name",name:"name",className:"form-control py-2",placeholder:"Full name"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"mobile_number",className:"fw-medium text-secondary form-label",children:"Mobile Number"}),e.jsx("input",{value:a.mobile_number,onChange:t,type:"text",id:"mobile_number",name:"mobile_number",className:"form-control py-2",placeholder:"Mobile Number"})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"paypal_id",className:"fw-medium text-secondary form-label",children:"Paypal ID for payment"}),e.jsx("input",{value:a.paypal_id,onChange:t,type:"text",id:"paypal_id",name:"paypal_id",className:"form-control py-2",placeholder:"paypal_id"})]}),e.jsxs("select",{name:"paymentProvider",className:"col-6 px-2 form-select rounded-3",id:"currency",value:a.paymentProvider||"paypal",onChange:t,children:[e.jsx("option",{value:"",disabled:!0,className:"bg-secondary text-light",children:"Payment Provider"}),e.jsx("option",{value:"paypal",children:"Paypal"})]}),l.role==="instructor"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Media Links"}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"website",className:"fw-medium text-secondary form-label",children:"Personal Website"}),e.jsx("input",{value:a.website,onChange:t,type:"text",id:"website",name:"website",className:"form-control py-2",placeholder:"Website"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"github",className:"fw-medium text-secondary form-label",children:"Github"}),e.jsx("input",{value:a.github,onChange:t,type:"text",id:"github",name:"github",className:"form-control py-2",placeholder:"Github"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"twitter",className:"fw-medium text-secondary form-label",children:"Twitter"}),e.jsx("input",{value:a.twitter,onChange:t,type:"text",id:"twitter",name:"twitter",className:"form-control py-2",placeholder:"Twitter"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"facebook",className:"fw-medium text-secondary form-label",children:"Facebook"}),e.jsx("input",{value:a.facebook,onChange:t,type:"text",id:"facebook",name:"facebook",className:"form-control py-2",placeholder:"Facebook"})]}),e.jsxs("div",{className:"my-2 row g-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"profession",className:"fw-medium text-secondary form-label",children:"Profession"}),e.jsx("input",{value:a.profession,onChange:t,type:"text",id:"profession",name:"profession",className:"form-control py-2",placeholder:"Profession"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"address",className:"fw-medium text-secondary form-label",children:"Address"}),e.jsx("input",{value:a.address,onChange:t,type:"text",id:"address",name:"address",className:"form-control py-2",placeholder:"Address"})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"skills",className:"fw-medium text-secondary form-label",children:"Skills"}),e.jsx("textarea",{name:"skills",id:"skills",className:"w-100 form-control rounded-3 p-2",maxLength:300,onChange:t,placeholder:"Enter skills (separated by commas)",children:a.skills})]})]})]}),l.oauthProvider==="none"&&e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"email",className:"fw-medium text-secondary form-label",children:"Email"}),e.jsx("input",{value:a.email,onChange:t,type:"email",id:"email",name:"email",className:"form-control py-2",placeholder:"Email"})]}),e.jsx("button",{type:"submit",disabled:x.state==="submitting",className:`w-100 d-flex justify-content-center align-items-center fw-medium text-center  ${x.state==="submitting"?"bg-secondary":"box-shadow"} rounded-pill p-2 mt-4 mb-2`,children:"Save Profile"})]})]}),e.jsx("button",{type:"button",onClick:_,className:" w-100 fw-medium bg-danger border-0 shadow text-light rounded-pill p-2 mt-4 mb-2",children:"Deactivate Account"}),e.jsx("br",{}),l.role==="student"&&e.jsx("button",{type:"button",onClick:k,className:"w-100 fw-medium bg-danger border-0 shadow text-light rounded-pill p-2 mt-4 mb-2",children:"Delete Account"})]})}export{B as default};
